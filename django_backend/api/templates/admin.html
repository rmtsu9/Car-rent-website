<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="Env/css/admin.css">
</head>
<script src="Env/js/admin_guard.js"></script>
<body>

<script>
    // Check if user is logged in and is admin
    window.addEventListener('load', () => {
        const isLoggedIn = localStorage.getItem('isLoggedIn');
        const userRole = localStorage.getItem('userRole');
        
        if (!isLoggedIn || userRole !== 'admin') {
            alert('กรุณาเข้าสู่ระบบด้วยบัญชี Admin');
            window.location.href = 'Login.html';
        }
    });

    function logout() {
        localStorage.removeItem('isLoggedIn');
        localStorage.removeItem('userRole');
        sessionStorage.removeItem('role');
        window.location.href = 'Login.html';
    }
</script>

<div class="dashboard">

    <!-- Sidebar -->
    <aside class="sidebar">
        <h2>Admin</h2>
        <ul>
            <li onclick="showSection('overview')">Overview</li>
            <li onclick="showSection('users')">Manage Users</li>
            <li onclick="showSection('activities')">Manage Activities</li>
            <li class="logout" onclick="logout()">Logout</li>
        </ul>
    </aside>

    <!-- Main Content -->
    <main class="content">

        <!-- Overview -->
        <section id="overview" class="section active">
            <h1>Dashboard Overview</h1>
            <div class="cards">
                <div class="card">Users <span>25</span></div>
                <div class="card">Main Activities <span>5</span></div>
                <div class="card">Sub Activities <span>12</span></div>
            </div>
        </section>

        <!-- Users -->
        <section id="users" class="section">
            <h1>Manage Users</h1>
            <table>
                <tr>
                    <th>Username</th>
                    <th>Phone</th>
                    <th>Role</th>
                </tr>
                <tr>
                    <td>user01</td>
                    <td>089xxxxxxx</td>
                    <td>User</td>
                </tr>
            </table>
        </section>

        <!-- Activities -->
        <section id="activities" class="section">
            <h1>Manage Activities</h1>

            <h3>Main Activity</h3>
            <input type="text" placeholder="Main Activity Name">
            <button>Add</button>

            <h3>Sub Activity</h3>
            <input type="text" placeholder="Sub Activity Name">
            <select>
                <option>Main Activity 1</option>
            </select>
            <button>Add</button>
        </section>

    </main>
</div>

<script src="Env/js/api.js"></script>
<script src="Env/js/admin.js"></script>
</body>
</html>
